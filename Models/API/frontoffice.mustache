var express = require('express');
var router = express.Router();


// 
const controller = require('../Models/{{title}}');
// nos temos de ir bucar todos dados e envia-la para o res.render 
router.get("/", function(req,res){
    controller.all( rows => {
        res.render("table", {
            columns: Object.keys(new controller()).map(key => {
            return {
            name: key
            };
            }),
            rows: rows.map(obj => {
                return {
                    properties: Object.keys(obj).map(key => {
                        return {
                            name: key,
                            value: obj[key]
                        }
                    })
                }
            }),
            //properties: [{{properties}}]
        });
    });
});

{{#models}}

router.get("/{{lowerCaseName}}", function(req, res) {
    res.send("View: {{upperCaseName}}");
})

router.get("/{{lowerCaseName}}/:id", function(req, res) {
    res.send("View: {{upperCaseName}} com id "+ req.params.id);
})

{{/models}}

module.exports = router;